#have todo &&
_todo() 
{
    #When the function or command is invoked, the first argument is the name of
    #the command whose arguments are being completed, the second argument is the
    #word being completed, and the third argument is the word preceding the word
    #being  completed on  the current command line.

    #program_name=$1
    #cur=$2
    #prev=$3

    local cur prev opts
    COMPREPLY=()
    cur="${COMP_WORDS[COMP_CWORD]}"
    prev="${COMP_WORDS[COMP_CWORD-1]}"

    COMMANDS="add a addto app append archive command del       \
              rm depri dp do help list ls listall lsa listcon  \
              lsc listfile lf listpri lsp listproj lsproj move \
              mv prepend prep pri p replace report"

    OPTS="-@ -@@ -+ -d -f -h -p -P -a -n -t -v -vv -V"

    case "${cur}" in
        -*)
           completions="$OPTS"
           ;;
        *)
          completions="$COMMANDS"
          ;;
    esac

    COMPREPLY=( $( compgen -W "$completions" -- $cur ))
    return 0
}
#[ -n "${have:-}" ] && complete -F _todo $filename todo

complete -F _todo todo t
# vim: set ts=8 sw=4 tw=0 ft=sh : 
