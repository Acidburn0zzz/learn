#!/usr/bin/env bash
#chilicuil <chilicuil@gmail.com> 2012
#a simple script to update firefox nightly when the integrated updater doesn't work

_exec()
{
    status=$?
    if [ $status != 0 ]; then
        exit $status
    fi
    echo "[+] $@"
    $@
}

notify ()
{
    if [[ $TERM == "linux" ]]; then
        notify-send -t 3000 "${@}"
    else
        echo "${@}"
    fi
}

#wget -c http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-19.0a1.en-US.linux-x86_64.tar.bz2
#_exec wget -c http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-21.0a1.en-US.linux-x86_64.tar.bz2 
_exec wget -c http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-23.0a1.en-US.linux-x86_64.tar.bz2
_exec extract firefox*
_exec rm -rf firefox-* $HOME/.bin/firefox64
_exec mv firefox $HOME/.bin/firefox64
notify "[+] Done" "restart firefox to apply the update"
